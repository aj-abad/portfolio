<template>
  <svg
    viewBox="0 0 667.15 494.91"
  >
    <defs>
      <clipPath id="aboutme-a">
        <rect y="466.43" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-b">
        <rect y="437.95" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-c">
        <rect y="409.48" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-d">
        <rect y="381" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-e">
        <rect y="339.43" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-f">
        <rect y="310.95" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-g">
        <rect y="282.48" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-h">
        <rect y="254" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-i">
        <rect y="212.43" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-j">
        <rect y="183.95" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-k">
        <rect y="155.48" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-l">
        <rect y="127" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-m">
        <rect y="85.43" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-n">
        <rect y="56.95" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-o">
        <rect y="28.48" width="667.15" height="29" style="fill: none" />
      </clipPath>
      <clipPath id="aboutme-p">
        <rect width="667.15" height="29" style="fill: none" />
      </clipPath>
    </defs>

    <g class="group-1">
      <g style="clip-path: url(#aboutme-p)">
        <text x="54.75" y="109.97" :style="computeStyle(0)">
          About
          <tspan class="to-fade">Me</tspan>
        </text>
      </g>
      <g style="clip-path: url(#aboutme-o)">
        <text x="54.75" y="109.97" :style="computeStyle(1)">
          About
          <tspan class="to-fade">Me</tspan>
        </text>
      </g>
      <g style="clip-path: url(#aboutme-n)">
        <text x="54.75" y="109.97" :style="computeStyle(2)">
          About
          <tspan class="to-fade">Me</tspan>
        </text>
      </g>
      <g style="clip-path: url(#aboutme-m)">
        <text x="54.75" y="109.97" :style="computeStyle(3)">
          About
          <tspan class="to-fade">Me</tspan>
        </text>
      </g>
    </g>
    <g class="group-2">
      <g style="clip-path: url(#aboutme-l)">
        <text class="to-fade" x="54.75" y="236.97" :style="computeStyle(4)">
          About Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-k)">
        <text class="to-fade" x="54.75" y="236.97" :style="computeStyle(5)">
          About Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-j)">
        <text class="to-fade" x="54.75" y="236.97" :style="computeStyle(6)">
          About Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-i)">
        <text class="to-fade" x="54.75" y="236.97" :style="computeStyle(7)">
          About Me
        </text>
      </g>
    </g>
    <g class="group-3">
      <g style="clip-path: url(#aboutme-h)">
        <text class="to-fade" x="54.75" y="363.97" :style="computeStyle(8)">
          About Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-g)">
        <text class="to-fade" x="54.75" y="363.97" :style="computeStyle(9)">
          About Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-f)">
        <text class="to-fade" x="54.75" y="363.97" :style="computeStyle(10)">
          About Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-e)">
        <text class="to-fade" x="54.75" y="363.97" :style="computeStyle(11)">
          About Me
        </text>
      </g>
    </g>
    <g class="group-4">
      <g style="clip-path: url(#aboutme-d)">
        <text x="54.75" y="490.97" :style="computeStyle(12)">
          <tspan class="to-fade">About</tspan>
          Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-c)">
        <text x="54.75" y="490.97" :style="computeStyle(13)">
          <tspan class="to-fade">About</tspan>
          Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-b)">
        <text x="54.75" y="490.97" :style="computeStyle(14)">
          <tspan class="to-fade">About</tspan>
          Me
        </text>
      </g>
      <g style="clip-path: url(#aboutme-a)">
        <text x="54.75" y="490.97" :style="computeStyle(15)">
          <tspan class="to-fade">About</tspan>
          Me
        </text>
      </g>
    </g>
    <g>
      <text class="group-1 final-text" x="54.75" y="109.97" style="opacity: 0">
        About
        <tspan style="opacity: 0">Me</tspan>
      </text>
      <text class="group-4 final-text" x="54.75" y="490.97" style="opacity: 0">
        <tspan style="opacity: 0">About</tspan>
        Me
      </text>
    </g>
  </svg>
</template>
<script>
import anime from "animejs/lib/anime.es";
export default {
  name: "AboutMeVector",
  props: {
    progress: Number,
  },
  data() {
    return {
      timeline: null,
      sineMultiplier: 1,
      opacity: 1,
    };
  },
  mounted() {
    this.timeline = anime.timeline({
      autoplay: false,
      duration: 1000,
    });
    this.timeline.add({
      targets: this,
      sineMultiplier: 0,
      duration: 600,
      easing: "easeInOutSine",
    });
    this.timeline.add(
      {
        targets: ".group-1",
        translateY: 172.51,
        duration: 400,
        easing: "easeInOutSine",
      },
      600
    );
    this.timeline.add(
      {
        targets: ".group-2",
        translateY: 45.51,
        duration: 400,
        easing: "easeInOutSine",
      },
      600
    );
    this.timeline.add(
      {
        targets: ".group-3",
        translateY: -81.49,
        duration: 400,
        easing: "easeInOutSine",
      },
      600
    );
    this.timeline.add(
      {
        targets: ".group-4",
        translateY: -208.49,
        duration: 400,
        easing: "easeInOutSine",
      },
      600
    );
    this.timeline.add(
      {
        targets: ".final-text",
        opacity: 1,
        duration: 1,
        easing: "linear",
      },
      600
    );
    this.timeline.add(
      {
        targets: ".to-fade",
        fill: "#31332F",
        duration: 400,
        easing: "easeInOutQuint",
      },
      600
    );
        this.timeline.add(
      {
        targets: ".to-fade",
        opacity: 0,
        duration: 1,
      },
      999
    );
  },
  methods: {
    computeStyle(i) {
      const translate = this.sineMultiplier * Math.sin(Math.PI * i / 8) * 60
      return `transform: translateX(${translate}px)`;
    },
  },
  watch: {
    progress() {
      if (!this.timeline) return false;
      this.timeline.seek(this.timeline.duration * (this.progress / 0.5));
    },
  },
};
</script>

<style lang="stylus" scoped>
text {
  font-size: 132px;
  font-family: 'ivy mode';
  font-weight: normal;
  fill: #e3e3e3;
  user-select: none;
  transform-origin: 50% 50%;
}
</style>